<script>
    const tokenAddress = '0x7beba6c16a4E1bDd04bF5a586ed45F3E0b505e22';
    const tokenSymbol = 'EURA';
    const tokenDecimals = 18;
    const tokenImage = 'https://lelle-creator.github.io/eura-token/logo.png'; 

    document.getElementById('addToken').addEventListener('click', async () => {
        if (typeof window.ethereum !== 'undefined') {
            try {
                // AGGIUNTA FONDAMENTALE PER MOBILE: 
                // Chiede al wallet di connettersi ufficialmente al sito
                await window.ethereum.request({ method: 'eth_requestAccounts' });

                // Una volta connesso, procede con l'aggiunta del token
                const wasAdded = await window.ethereum.request({
                    method: 'wallet_watchAsset',
                    params: {
                        type: 'ERC20',
                        options: {
                            address: tokenAddress,
                            symbol: tokenSymbol,
                            decimals: tokenDecimals,
                            image: tokenImage,
                        },
                    },
                });
            } catch (error) {
                console.error(error);
                alert("Errore durante l'operazione: " + error.message);
            }
        } else {
            alert('MetaMask non rilevato! Se sei su mobile, apri questo sito nel browser interno di MetaMask.');
        }
    });
</script>
